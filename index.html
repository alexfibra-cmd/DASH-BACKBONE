<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Tratamento de Máscara</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      padding:20px; min-height:100vh; color:#fff;
    }
    .container { max-width:1400px; margin:0 auto; }
    .header {
      background: linear-gradient(135deg, #00f5ff 0%, #ff00ff 50%, #00ff88 100%);
      background-size:200% 200%; animation:gradientShift 5s ease infinite;
      color:#0f0c29; padding:30px; border-radius:20px; text-align:center; margin-bottom:30px;
      box-shadow:0 0 40px rgba(0,245,255,.5), 0 0 80px rgba(255,0,255,.3);
      border:2px solid rgba(0,245,255,.5);
    }
    @keyframes gradientShift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    .header h1 { font-size:2.2em; text-shadow:0 0 20px rgba(0,0,0,.5); letter-spacing:2px; font-weight:800; }

    .form-container { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:25px; margin-bottom:40px; }
    .form-section {
      background:rgba(30,30,60,.8); padding:25px; border-radius:20px;
      box-shadow:0 8px 32px rgba(0,0,0,.5); border:2px solid rgba(0,245,255,.3);
      transition:.3s ease; position:relative; overflow:hidden; backdrop-filter:blur(10px);
    }
    .form-section h2 {
      background:linear-gradient(90deg,#00f5ff,#ff00ff);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
      margin-bottom:20px; font-size:1.4em; text-shadow:0 0 20px rgba(0,245,255,.5);
    }
    .form-group { margin-bottom:20px; }
    .form-group label {
      display:block; margin-bottom:8px; color:#00f5ff; font-weight:600; font-size:.9em; text-transform:uppercase;
      letter-spacing:1px; text-shadow:0 0 10px rgba(0,245,255,.5);
    }
    .form-group input, .form-group textarea {
      width:100%; padding:12px 15px; border:2px solid rgba(0,245,255,.3); border-radius:12px; font-size:1em; transition:.3s ease;
      background:rgba(15,12,41,.6); color:#fff;
    }
    .form-group input:focus, .form-group textarea:focus {
      outline:none; border-color:#00f5ff; background:rgba(15,12,41,.9); box-shadow:0 0 20px rgba(0,245,255,.4);
    }
    .form-group textarea { min-height:150px; resize:vertical; font-family:inherit; }

    .btn-submit {
      background:linear-gradient(135deg,#00f5ff 0%,#ff00ff 100%); color:#0f0c29; border:none; padding:15px 40px; border-radius:12px;
      font-size:1.1em; font-weight:700; cursor:pointer; transition:.3s ease; box-shadow:0 0 20px rgba(0,245,255,.5), 0 0 40px rgba(255,0,255,.3);
      text-transform:uppercase; letter-spacing:2px; width:100%; margin-top:10px;
    }
    .btn-submit:hover { transform:translateY(-3px) scale(1.02); box-shadow:0 0 30px rgba(0,245,255,.8), 0 0 60px rgba(255,0,255,.5); }

    .history-container {
      background:rgba(30,30,60,.8); padding:30px; border-radius:20px; box-shadow:0 8px 32px rgba(0,0,0,.5);
      border:2px solid rgba(0,245,255,.3); backdrop-filter:blur(10px);
    }
    .history-header {
      display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; padding-bottom:15px; gap:12px; flex-wrap:wrap;
      border-bottom:3px solid; border-image:linear-gradient(90deg,#00f5ff,#ff00ff,#00ff88) 1;
    }
    .history-header h2 {
      background:linear-gradient(90deg,#00f5ff,#ff00ff);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
      font-size:1.8em; text-shadow:0 0 20px rgba(0,245,255,.5);
    }
    .clear-btn {
      background:linear-gradient(135deg,#ff00ff 0%,#ff0080 100%); color:#fff; border:none; padding:10px 25px; border-radius:10px;
      cursor:pointer; font-weight:600; transition:.3s ease; box-shadow:0 0 20px rgba(255,0,255,.5);
    }
    .clear-btn:hover { transform:translateY(-2px); box-shadow:0 0 30px rgba(255,0,255,.8); }

    .table-container { overflow-x:auto; border-radius:15px; box-shadow:0 4px 20px rgba(0,0,0,.3); }
    table { width:100%; border-collapse:collapse; background:rgba(15,12,41,.6); }
    thead { background:linear-gradient(135deg,#00f5ff 0%,#ff00ff 100%); color:#0f0c29; }
    thead th { padding:18px 15px; text-align:left; font-weight:700; text-transform:uppercase; letter-spacing:1px; font-size:.9em; }
    tbody tr { border-bottom:1px solid rgba(0,245,255,.2); transition:.3s ease; }
    tbody tr:hover { background:linear-gradient(90deg, rgba(0,245,255,.1) 0%, rgba(255,0,255,.1) 100%); transform:scale(1.01); }
    tbody td { padding:15px; color:#e0e0e0; }
    .badge {
      display:inline-block; padding:6px 14px; border-radius:20px; font-size:.85em; font-weight:600;
      background:linear-gradient(135deg,#00f5ff 0%,#ff00ff 100%); color:#0f0c29; box-shadow:0 0 15px rgba(0,245,255,.5);
    }
    .action-btn {
      background:linear-gradient(135deg,#ff00ff 0%,#ff0080 100%); color:white; border:none; padding:8px 15px; border-radius:8px;
      cursor:pointer; font-weight:600; transition:.3s ease; box-shadow:0 0 15px rgba(255,0,255,.4); margin:0 5px;
    }
    .action-btn:hover { transform:scale(1.05); box-shadow:0 0 25px rgba(255,0,255,.7); }
    .view-btn { background:linear-gradient(135deg,#00ff88 0%,#00f5ff 100%); }
    .delete-btn { background:linear-gradient(135deg,#ff0080 0%,#ff4444 100%); }

    .empty-state { text-align:center; padding:60px 20px; color:#a0aec0; }
    .modal { display:none; position:fixed; z-index:1000; inset:0; width:100%; height:100%; background:rgba(0,0,0,.85); backdrop-filter:blur(8px); overflow-y:auto; }
    .modal-content { background:#1d1b33; margin:4% auto; border:2px solid #00f5ff55; border-radius:18px; width:95%; max-width:1000px; overflow:hidden; }
    .modal-header { background:linear-gradient(135deg,#00f5ff 0%,#ff00ff 100%); padding:18px 24px; display:flex; justify-content:space-between; align-items:center; }
    .modal-header h2 { color:#0f0c29; font-weight:800; }
    .close { color:#0f0c29; font-size:32px; font-weight:bold; cursor:pointer; }
    .modal-body { padding:24px; color:#eee; }
    .modal-footer { padding:16px 24px; background:#17162a; display:flex; justify-content:space-between; align-items:center; gap:12px; }
    .stats { display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:14px; margin-bottom:16px; }
    .stat { background:#242345; border:1px solid #00f5ff33; border-radius:12px; padding:14px; text-align:center; }
    @media (max-width: 768px) {
      .header h1{font-size:1.6em}
      .form-container{grid-template-columns:1fr}
      thead th, tbody td{padding:10px 8px}
    }
  </style>
</head>
<body>
  <div id="toast" style="position:fixed; top:20px; right:20px; background:linear-gradient(135deg,#00f5ff,#ff00ff); color:#0f0c29; padding:12px 16px; border-radius:10px; display:none; font-weight:700; z-index:9999;"></div>

  <div class="container">
    <div class="header">
      <h1>Dashboard de Tratamento de Máscara</h1>
    </div>

    <div class="form-container">
      <div class="form-section">
        <h2>Informações Básicas</h2>
        <div class="form-group">
          <label for="dc">DC</label>
          <input type="text" id="dc" placeholder="Digite o DC">
        </div>
        <div class="form-group">
          <label for="descricao">Descrição</label>
          <input type="text" id="descricao" placeholder="Digite a descrição">
        </div>
        <div class="form-group">
          <label for="cod_obra_num">COD_OBRA_NUM</label>
          <input type="text" id="cod_obra_num" placeholder="Digite o código da obra">
        </div>
      </div>

      <div class="form-section">
        <h2>Máscara do BA</h2>
        <div class="form-group">
          <label for="mascara_ba">Texto</label>
          <textarea id="mascara_ba" placeholder="Informações sobre a máscara do BA..."></textarea>
        </div>
      </div>

      <div class="form-section">
        <h2>Material Aplicado</h2>
        <div class="form-group">
          <label for="material_aplicado">Texto</label>
          <textarea id="material_aplicado" placeholder="Informações sobre o material aplicado..."></textarea>
        </div>
      </div>
    </div>

    <div class="form-section" style="max-width: 420px; margin: 0 auto 40px;">
      <button class="btn-submit" onclick="adicionarRegistro()">Adicionar Registro</button>
    </div>

    <div class="history-container">
      <div class="history-header">
        <h2>Histórico de Registros</h2>

        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap">
          <span id="contadorRegistros" class="badge" title="Quantidade total de registros">0 registros</span>

          <input id="buscaInput" type="text" placeholder="Buscar por DC ou Descrição..."
            style="padding:10px 12px; border-radius:10px; border:2px solid rgba(0,245,255,0.3); background:rgba(15,12,41,0.6); color:#fff; outline:none; min-width:240px"
            oninput="aplicarFiltro()" />

          <button class="action-btn view-btn" onclick="exportarJSON()">Exportar JSON</button>
          <button class="action-btn" onclick="exportarCSV()">Exportar CSV</button>

          <label class="action-btn" style="display:flex; align-items:center; gap:6px; cursor:pointer;">
            Importar JSON
            <input id="importInput" type="file" accept="application/json" onchange="importarJSON(event)" style="display:none">
          </label>

          <button class="clear-btn" onclick="limparHistorico()">Limpar Tudo</button>
        </div>
      </div>

      <div class="table-container">
        <table id="historicoTable">
          <thead>
            <tr>
              <th>#</th>
              <th>DC</th>
              <th>Descrição</th>
              <th>COD_OBRA_NUM</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="historicoBody">
            <tr class="empty-state">
              <td colspan="5">
                <div>
                  <p>📝 Nenhum registro adicionado ainda</p>
                  <p style="font-size:0.9em; margin-top:10px;">Preencha o formulário acima e clique em "Adicionar Registro"</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="detailModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Detalhes do Registro</h2>
        <span class="close" onclick="fecharModal()">×</span>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer">
        <div class="footer-info">Dados salvos no navegador</div>
        <div class="footer-actions">
          <button class="action-btn delete-btn" id="modalDeleteBtn">Deletar</button>
          <button class="action-btn view-btn" onclick="fecharModal()">Fechar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ==== DADOS INICIAIS EMBUTIDOS (17 registros) ====
    const DADOS_INICIAIS = [{"id":18,"dc":"195840","descricao":"219340742 219532435 SEM GASTO","codObraNum":"2025429671","mascaraBa":"BA;219532435\n\n\nOPERADOR;    \n\n\nTEC6:TONY MARCOS 56500\n\n\nCONTRATUAL; BACKBONE\n\nATIVIDADE;CORRETIVA \n\nRAMIFICACAO;OBBU\n\nCABO;  TR#1020\n\nAFETACAO; ROMPIMENTO \n\nSISTEMA;  1774/0417/0224/0402\n\nDESCRICAO DE EQUIPAMENTO: ALCATEL\n\nTIPO AFETACAO; ROMPIMENTO \n\nTIPO DE REDE; AEREO\n\nTRECHO; CGD X IGI\n\nCAUSA DA FALHA; DESCARGA ELETRICA\n\nCODIGO DO CABO;AS 80G \n\nMODELO;PIRELLI \n\nLANCAMENTO DE CABO?(X)Sim /( )Nao \n\nQUANT;0\n\nGASTO DE MATERIAL;(X)SIM/()NAO \n\nCIREX;XX GAD;XX CIS;  1325519\n\nAPLICADA EMENDA NOVA?(X)Sim/() Nao \n\nQUANT; 1\n\nFUSOES?(X)Sim/()Nao QUANT: 72\n\nQUANTIDADE DE FIBRAS DO CABO; 72\n\nQUANTIDADE DE FIBRAS EMENDADAS;72\n\nENDERECO DO DANO; EST. DE URUCANIA N988\n\nPONTO DE REFERENCIA: R.ADRIANO FONSECA FILHO \n\nDISTANCIA DO DANO; 11118 METROS DE CGD\n\nCOORDENADAS GPS; -22.9181184,-43.6464696","materialAplicado":"GASTO \n\n\n  OBS: BA 09 ABERTO PARA CORRECAO DE GASTO DE MATERIA    \n\n    GASTO DE  MATERIAL  DE CABO TR# 1020   \n\n  COD 322245 CABO TEL OPT CFOA -SM -AS -80-S -72 FO AREO 200 MTS\n\n  Cód.312481 caixa emen opt até 12 FO UN 01\n\n  Cód 312724 CEO SBTRRN144FBRS UN 01\n\n  COD. TEMC9ARFZ PROTETOR DE EMEN UN.144\n\n  ABRAÇADEIRA DE NYLON T18L(200 X 2,6MM) UN 60    \n\n  CIS 1325519","dataHora":"24/10/2025, 17:18:19","data":"24/10/2025","hora":"17:18:19","timestamp":1761337099140},{"id":17,"dc":"199737","descricao":"219497405 COM GASTO","codObraNum":"2025456320","mascaraBa":"BA 219497405\n\nOP.SUELEN\n\nTEC1;ROSTON CORREA ID.61766\n\nTEC2;GLAUBER DOS SANTOS ID.60484\n\nTEC3;JEFFERSON SILVA ID.56615\n\nTEC4;CARLOS LUIZ ID.61791\n\nCONTRATUAL;BACKBONE\n\nATIVIDADE;CORRETIVA   \n\nRAMIFICACAO;OBBU\n\nCABO;TR#997\n\nAFETACAO;ROMPIMENTO\n\nSISTEMA:C57\n\nDESCRICAO DO EQUIPAMENTO:HUAWEI\n\nTIPO AFETACAO;ROMPIMENTO\n\nTIPO DE REDE;DUTO\n\nTRECHO;EST SRT  X EST FLO\n\nCAUSA DA FALHA:VANDALISMO\n\nMODELO;PIRELLI\n\nLANCAMENTO DE CABO?()SIM /(X)NAO\n\nQUANT;00\n\nGASTO DE MATERIAL;(X)SIM/()NAO \n\nCIREX;XX GAD;XX CIS;1173810\n\nAPLICADA EMENDA NOVA?()SIM /(X)NAO\n\nFUSOES?(X)SIM /()NAO QUANT:72\n\nQUANTIDADE DE FIBRAS DO CABO;72\n\nQUANTIDADE DE FIBRAS EMENDADAS;72\n\nENDERECO DO DANO;AV.MEM DE SA S/N\n\nBAIRRO:CENTRO\n\nPONTO DE REFERENCIA:RUA DO LAVRADIO\n\nDISTANCIA DO DANO;1800MTS\n\nCOORDENADAS GPS;-22.913054, -43.181735","materialAplicado":"GASTOS MATERIAL:\n\n\n  TEMC9FOEZ  ADESIVO DENVERPOXI - 4UN\n\n  312723 CEO 72FBRS - 01UN\n\n  TEMC9ARFZ Tubetes 72 unidades \n\n  300303 plaqueta vtal 5 unidade\n\n\n  CIS:1173810","dataHora":"24/10/2025, 17:17:00","data":"24/10/2025","hora":"17:17:00","timestamp":1761337020291},{"id":16,"dc":"122043","descricao":"218197455 COM GASTO","codObraNum":"2025310706","mascaraBa":"BA;218197455\nOP.SUELEN\nTEC1;ROBSON LUIZ ID.56676\nTEC2;RICARDO DA COSTA ID.56420\nATIVIDADE;CORRETIVA \nRAMIFICACAO;OBBU\nCABO;TR#1205\nAFETACAO;ROMPIMENTO\nSISTEMA;0400\nDESCRICAO DE EQUIPAMENTO:ALCATEL\nTIPO AFETACAO;ROMPIMENTO\nTIPO DE REDE;AEREO\nTRECHO; EST BRB  X EST END\nCAUSA DA FALHA;VANDALISMO\nCODIGO DO CABO;AS 80G \nMODELO;PIRELLI \nLANCAMENTO DE CABO?()Sim /(X)Nao \nQUANT;00\nGASTO DE MATERIAL;(X)SIM/()NAO \nCIREX;XX GAD;XX CIS;1148178\nAPLICADA EMENDA NOVA?(X)Sim/() Nao\nFUSOES?(X)Sim/()Nao QUANT:72\nQUANTIDADE DE FIBRAS DO CABO;72FO\nQUANTIDADE DE FIBRAS EMENDADAS;72\nENDERECO DO DANO;AV.AMARO CAVALCANTI,400\nBAIRRO;ENGENHO DE DENTRO\nPONTO DE REFERENCIA:PROX EST DE END\nDISTANCIA DO DANO;9000 MTS DE BRB\nCOORDENADAS GPS;-22.89572, -43.29336\nTEC TESTE;VIA GAVA\nTEC,TEC:ROBSON LUIZ\nTEC RESP;ROBSON LUIZ","materialAplicado":"ASTO MATERIAL:\n\n  CODIGO 300763 - CEO 48-73 FO SUBT - 1 UNIDADE\n\n  CIS:1148178\n","dataHora":"24/10/2025, 17:15:18","data":"24/10/2025","hora":"17:15:18","timestamp":1761336918874},{"id":15,"dc":"154410","descricao":"218776314 218801354  COM GASTO","codObraNum":"2025368977","mascaraBa":"CORRECAO MATERIAL BA 218776314 E BA 218789504\n\nBA 218776314\nOP.SUELEN\nTEC1;MATHEUS MONTEIRO ID.56617\nTEC2;DIEGO APOLINARIO ID.56211\nCONTRATUAL;BACKBONE\nATIVIDADE;CORRETIVA\nRAMIFICACAO;OBBU\nCABO;TR#926\nAFETACAO;ROMPIMENTO\nSISTEMA:C23\nDESCRICAO DE EQUIPAMENTO:HUAWEI\nTIPO AFETACAO;ROMPIMENTO\nTIPO DE REDE;AEREO\nTRECHO; EST X EST \nCAUSA DA FALHA:CABO CORTADO\nMODELO;PIRELLI \nLANCAMENTO DE CABO?(X)SIM /()NAO\nQUANT;180MTS\nGASTO DE MATERIAL;(X)SIM/()NAO \nCIREX;XX GAD;XX CIS;1159682\nAPLICADA EMENDA NOVA?()SIM /(X)NAO\nFUSOES?(X)SIM /()NAO QUANT:200\nQUANTIDADE DE FIBRAS DO CABO;72FO\nQUANTIDADE DE FIBRAS EMENDADAS;200\nENDERECO DO DANO;AV.MENEZES CORTES,3472\nBAIRRO;ENGENHO NOVO\nPONTO DE REFERENCIA:COMUNIDADE DO LINS\nDISTANCIA DO DANO;11000 MTS DE CIN\nCOORDENADAS GPS;-22.923506, -43.283630\nTEC TESTE;VIA GAVA\nTEC,TEC:MATHEUS MONTEIRO\nTEC RESP;MATHEUS MONTEIRO","materialAplicado":"TC024073 - 12/06/25 11:28\n  GASTO MATERIAL: \n\n  Cabo de 72Fo cód: 322245 180 metros \n  Protetor de emenda TEMC5927Z 100 unidades \n  Protetor de emenda TEMC9ARFZ 100 Unidades\n  312723 caixa emenda 72fo: 2 unidades\n\n  COMUNIDADE DO LINS\n  CIS:1159682","dataHora":"24/10/2025, 17:13:15","data":"24/10/2025","hora":"17:13:15","timestamp":1761336795141},{"id":14,"dc":"154495","descricao":"218770188 COM GASTO","codObraNum":"2025367040","mascaraBa":"BA; 218770188\nOPERADOR; KEILA\nTEC. BRUNO RAMOS ID:56496\nTEC. DAVIDSON BATISTA ID:56786\nTEC. ROBERTO DE SOUZA ID: 56487\nTEC. ADELSON \nTEC. VAGNER VAGNER OLIVEIRA ID: 56820\nTEC. ISAAC RODRIGUES 56418\nTEC. BRUNO NASCIMENTO ID:56698\nCONTRATUAL;BACBONE\nATIVIDADE;CORRETIVA \nRAMIFICACAO;OBBU\nCABO;TR#976 \nAFETACAO; \nDESCRICAO DE EQUIPAMENTO:MARCONI\nTIPO AFETACAO;ROMPIMENTO\nTIPO DE REDE; AEREO\nTRECHO; BRB X BR \nCAUSA DA FALHA; AVISO LIGTH \nCODIGO DO CABO;AS 80G \nMODELO;PIRELLI \nLANCAMENTO DE CABO?()Sim /(X )Nao \nGASTO DE MATERIAL;(X)SIM/()NAO \nCIS: 1316901\nAPLICADA EMENDA NOVA?()Sim/(X) Nao \nFUSOES?()Sim/(X)Nao QUANT: 00\nQUANTIDADE DE FIBRAS DO CABO; 72FO \nQUANTIDADE DE FIBRAS EMENDADAS;72\nENDERECO DO DANO; AV. PASTOR MARTIN LUTHER KING JR 2450\nBAIRRO: PAVUNA \nPONTO DE REFERENCIA: PROX A COMUNIDADE DA PEDREIRA \nDISTANCIA DO DANO; 7824 DE BRB \nCOORDENADAS GPS;-22.821381 -43.351644\nTESTE; GAVA \nSUP. RESP: LUIZ RAPHAEL","materialAplicado":"TR413326 - 06/06/25 20:47\n  *** GASTO DE MATERIAL ***\n\n\n  322245 CABO TEL OPT CFOA-SM-AS-80-TS 72 AEREO --270 MTS\n\n  TEMC9ARFZ PROTETOR DE EMENDA --72\n\n  TEMC5927Z PROTETOR DE EMENDA -- 72 \n\n  FOI LANÇADO  270 MTS DE CABO ENTROMCADO EM CAIXAS DE REUSO E FEITA 144 FUSOES","dataHora":"24/10/2025, 17:11:16","data":"24/10/2025","hora":"17:11:16","timestamp":1761336676314},{"id":13,"dc":"146839","descricao":"218659848 COM GASTO","codObraNum":"2025354538","mascaraBa":"BA 218659848\nOP.SUELEN\nTEC1;MATHEUS MONTEIRO ID.56617\nTEC2;DOUGLAS GUSTAVO ID.56439\nCONTRATUAL;BACKBONE\nATIVIDADE;CORRETIVA \nRAMIFICACAO;OBBU\nCABO;TR#897\nAFETACAO;ATENUACAO\nSISTEMA:1830\nDESCRICAO DE EQUIPAMENTO:ALCATEL\nTIPO AFETACAO;ATENUACAO\nTIPO DE REDE;DUTO\nTRECHO; EST  X EST \nCAUSA DA FALHA:DEGRADACAO POR ATENUACAO\nMODELO;PIRELLI \nLANCAMENTO DE CABO?()SIM /(X)NAO\nQUANT;00\nGASTO DE MATERIAL;(X)SIM/()NAO \nCIREX;XX GAD;XX CIS;1157334\nAPLICADA EMENDA NOVA?()SIM /(X)NAO\nFUSOES?(X)SIM /()NAO QUANT:144\nQUANTIDADE DE FIBRAS DO CABO;72FO\nQUANTIDADE DE FIBRAS EMENDADAS:144\nENDERECO DO DANO;RUA DA GAMBOA,144\nBAIRRO;SANTO CRISTO\nPONTO DE REFERENCIA:EM FRENTE A COMUNIDADE PROVIDENCIA\nDISTANCIA DO DANO;1400 MTS DE ARC\nCOORDENADAS GPS;-22.90031, -43.19860\nTEC TESTE;VIA GAVA\nTEC,TEC:MATHEUS MONTEIRO\nTEC RESP;MATHEUS MONTEIRO","materialAplicado":"\n  CIS:1157334\n\n  GASTO MATERIAL:\n\n  caixa 72 fo 305133 : 1 unidade \n  Temc9arfz protetor de emenda  :144 unidades","dataHora":"24/10/2025, 17:09:27","data":"24/10/2025","hora":"17:09:27","timestamp":1761336567747},{"id":12,"dc":"195840","descricao":"219340742 219532435 SEM GASTO","codObraNum":"2025429671","mascaraBa":"BA: 219340742\nOPERADOR; FERNANDO\nTEC1: TONY MARCOS - ID 0103056500\nCONTRATUAL; BACKBONE URBANO\nATIVIDADE:CORRETIVA \nRAMIFICACAO; OBBU\nCABO; TR#1020\nAFETACAO; BARRAMENTO\nSISTEMA; 1774/0417/0224/0402\nDESCRICAO DE EQUIPAMENTO:ALCATEL \nTIPO AFETACAO; ROMPIMENTO\nTIPO DE REDE; SUBTERRANEA\nTRECHO; EQUIPAMENTO X ESTACAO\nCAUSA DA FALHA; DESCARGA ELETRICA\nCODIGO DO CABO;AS 80G\nMODELO;PIRELLI\nLANCAMENTO DE CABO?(X)Sim /()Nao\nGASTO DE MATERIAL;(X)SIM/(X)NAO\nAPLICADA EMENDA NOVA?(X)Sim/() Nao\nFUSOES?(X)Sim/()Nao QUANT: 72\nQUANTIDADE DE FIBRAS DO CABO; 72\nQUANTIDADE DE FIBRAS EMENDADAS; 72\nENDERECO DO DANO: EST. DE URUCANIA N988\nBAIRRO: PACIENCIA\nPONTO DE REFERENCIA: ESTACAO DE CIN\nDISTANCIA DO DANO; 11118 METROS DE CGD\nCOORDENADAS GPS: -22.91804,-43.64326\nTEC TESTE; GAVA\nTEC.RESP: TONY MARCOS\nOBS: CIS 1325519;\n","materialAplicado":"OBS: CIS 1325519;\n\n  COD 300560 CABO TEL OPT  CFOA -SM -AS -80-S -36 FO AREO 106 MTS \n  COD 300763 caixa emen opt subt 48 -72 UN 01\n  COD 300768 CEO SUT18-36FBRS UN 01\n  COD. TEMC9ARFZ PROTETOR DE EMEN UN.72\n","dataHora":"24/10/2025, 17:01:14","data":"24/10/2025","hora":"17:01:14","timestamp":1761336074956},{"id":11,"dc":"146843","descricao":"218679217 COM GASTO","codObraNum":"2025354754","mascaraBa":"A: 218679217\nOPERADOR: JOYCE\nTEC. MATHEUS MONTEIRO ID: 56617\nTEC: DOUGLAS GUSTAVO ID: 56439\nCONTRATUAL: BACKBONE \nATIVIDADE: CORRETIVA \nRAMIFICACAO: OBBU\nCABO: TR# 767\nAFETACA: ROMPIMENTO\nSISTEMA: ELANCE 16\nDESCRICAO DE EQUIPAMENTO: ALCATEL\nTIPO AFETACAO: ROMPIMENTO\nTIPO DE REDE: DUTO\nTRECHO: RB1 X GBN\nCAUSA DA FALHA: VANDALISMO\nCODIGO DO CABO: AS 80G \nMODELO: PIRELLI \nLANCAMENTO DE CABO: ()Sim /(X )Nao \nQUANT: 0\nGASTO DE MATERIAL: (X)SIM ()NAO \nCIREX;XX GAD;XX CIS: 1157352\nAPLICADA EMENDA NOVA: ()Sim/(X) Nao \nQUANT: XX \nFUSOES: (X)Sim ()Nao QUANT: 144\nQUANTIDADE DE FIBRAS DO CABO: 72 FO \nQUANTIDADE DE FIBRAS EMENDADAS: 0\nENDERECO DO DANO: RUA ALMIRANTE ALEXANDRINO 3677\nBAIRRO: SANTA TEREZA\nPONTO DE REFERENCIA:  COMUNIDADE DOS PRAZERES\nDISTANCIA DO DANO: 1.400 DE ARC \nCOORDENADAS GPS: -22.9365178,-43.2040897,21\nTESTE:  GAVA\nTEC: N/I\nTEC:  MATHEUS ABREU","materialAplicado":"TC045265 - 22/05/25 13:50\n  GASTO \n  CAIXA DE EMENDA 36FO COD:300767 2 UNIDADES \n  CABO DE 36 FO COD :322252 \n  500 METROS CONJUNTO CAPRE AZUL COD: 319014 \n  10 UNIDADES ÁLCOOL ISOPROPILICO COD :TELI0003Z \n  3 UNIDADES PLAQUETA IDENTIDICAÇÃO COD:313763 \n  12 UNIDADES PROTETOR DE EMENDA COD TEMC5027Z 144 UNIDADES\n\nTC045265 - 22/05/25 13:59\n  cis 1157352","dataHora":"24/10/2025, 16:58:11","data":"24/10/2025","hora":"16:58:11","timestamp":1761335891984},{"id":10,"dc":"140349","descricao":"218558578 COM GASTO","codObraNum":"2025339151","mascaraBa":"TC024073 - 30/04/25 15:55\n  OPERADOR: SUELEN\n  LOCALIDADE: RJ\n  ESTACAO: RAM\n  TRECHO: EST X EST \n  QUANTIDADE DE EMENDAS: 02\n  TIPO DE EMENDA:DUTO\n  CABO:TR#8001\n  SISTEMA:0205\n  MODELO: AS 80G\n  FABRICANTE: PIRELLI\n  QUANTIDADE DE FIBRAS DO CABO: 72\n  QUANTIDADE DE FIBRAS EMENDADAS: 144\n\n  CODIGO CAIXA DE EMENDA 1: NÃO PREENCHER \n  ENDERECO:AV.BRASIL S/N\n  PONTO DE REFERENCIA:MURO DO EXERCITO\n  DISTANCIA DO DANO:10400 MTS DE FLO\n  COORDENADAS GPS;-22.86119, -43.45226\n\n  CODIGO CAIXA DE EMENDA 1: NÃO PREENCHER \n  ENDERECO:AV.BRASIL S/N\n  PONTO DE REFERENCIA: MURO DO EXERCITO\n  DISTANCIA DO DANO: 10400 MTS DE FLO\n  COORDENADAS GPS;-22.86119, -43.45226","materialAplicado":"CIS:1153641\n\n  2 CAIXA DE EMENDA 72\n  COD : 300763\n  144 tubetes\n  Cód temcarfz\n  Prefixo: Sicaweb: 30/04/25 15:57\n  Retorno=BA pode ser encerrado. Alarme normalizado na Gerência de Falhas.","dataHora":"24/10/2025, 16:53:01","data":"24/10/2025","hora":"16:53:01","timestamp":1761335581093},{"id":9,"dc":"146843","descricao":"218679217 COM GASTO","codObraNum":"2025354754","mascaraBa":"BA: 218679217\nOPERADOR: JOYCE\nTEC. MATHEUS MONTEIRO ID: 56617\nTEC: DOUGLAS GUSTAVO ID: 56439\nCONTRATUAL: BACKBONE \nATIVIDADE: CORRETIVA \nRAMIFICACAO: OBBU\nCABO: TR# 767\nAFETACA: ROMPIMENTO\nSISTEMA: ELANCE 16\nDESCRICAO DE EQUIPAMENTO: ALCATEL\nTIPO AFETACAO: ROMPIMENTO\nTIPO DE REDE: DUTO\nTRECHO: RB1 X GBN\nCAUSA DA FALHA: VANDALISMO\nCODIGO DO CABO: AS 80G \nMODELO: PIRELLI \nLANCAMENTO DE CABO: ()Sim /(X )Nao \nQUANT: 0\nGASTO DE MATERIAL: (X)SIM ()NAO \nCIREX;XX GAD;XX CIS: 1157352\nAPLICADA EMENDA NOVA: ()Sim/(X) Nao \nQUANT: XX \nFUSOES: (X)Sim ()Nao QUANT: 144\nQUANTIDADE DE FIBRAS DO CABO: 72 FO \nQUANTIDADE DE FIBRAS EMENDADAS: 0\nENDERECO DO DANO: RUA ALMIRANTE ALEXANDRINO 3677\nBAIRRO: SANTA TEREZA\nPONTO DE REFERENCIA:  COMUNIDADE DOS PRAZERES\nDISTANCIA DO DANO: 1.400 DE ARC \nCOORDENADAS GPS: -22.9365178,-43.2040897,21\nTESTE:  GAVA\nTEC: N/I\nTEC:  MATHEUS ABREU","materialAplicado":"GASTO \n  CAIXA DE EMENDA 36FO COD:300767 2 UNIDADES \n  CABO DE 36 FO COD :322252 \n  500 METROS CONJUNTO CAPRE AZUL COD: 319014 \n  10 UNIDADES ÁLCOOL ISOPROPILICO COD :TELI0003Z \n  3 UNIDADES PLAQUETA IDENTIDICAÇÃO COD:313763 \n  12 UNIDADES PROTETOR DE EMENDA COD TEMC5027Z 144 UNIDADES\n\nTC045265 - 22/05/25 13:59\n  cis 1157352","dataHora":"24/10/2025, 16:49:07","data":"24/10/2025","hora":"16:49:07","timestamp":1761335347035},{"id":8,"dc":"188930","descricao":"219129059 COM GASTO","codObraNum":"2025396731","mascaraBa":"A: 219129059\nOPERADOR: JOYCE\nTEC: ANDRE MARQUES ID: 56768 - TEC: LEONARDO SILVA ID: 56785\nTEC: WILLIAN SANTOS ID: 61904\nTEC: DOUGLAS BARBOSA ID: 60612\nTEC: ALEX ESTEVAO ID: 56428\nTEC: BRUNO RODRIGUES ID: 56465\nTEC: CLAUDIO VITALINO ID:60614\nCONTRATUAL: BACKBONE\nATIVIDADE: CORRETIVA \nRAMIFICACAO: OBBUTEC\nCABO: TR# 869\nAFETACAO: ROMPIMENTO\nSISTEMA: RJBM - 0402\nDESCRICAO DE EQUIPAMENTO:  PADTEC\nTIPO AFETACAO: ROMPIMENTO\nTIPO DE REDE: DUTO\nTRECHO: END X MAR\nCAUSA DA FALHA: VANDALISMO\nCODIGO DO CABO: AS 80G \nMODELO: PIRELLI \nLANCAMENTO DE CABO: ()Sim (X )Nao \nQUANT: 0\nGASTO DE MATERIAL: (X)SIM (X)NAO \nCIREX;XX GAD;XX CIS: 1164415\nAPLICADA EMENDA NOVA: ()Sim/(X) Nao \nQUANT: 0\nFUSOES: (X)Sim ()Nao QUANT:0\nQUANTIDADE DE FIBRAS DO CABO: 144\nQUANTIDADE DE FIBRAS EMENDADAS:  288\nENDERECO DO DANO: RUA URUNOS 803\nBAIRRO: RAMOS\nPONTO DE REFERENCIA: FERRO VELHO\nDISTANCIA DO DANO: 1.200 DE RAMOS\nCOORDENADAS GPS: 22.8593782!4d-43.2584975\nTESTE:  GAVA\nTEC: N/I -\nTEC: FABIO ALMEIDA","materialAplicado":"\n  GASTO DE MATERIAL\n\n  CIS: 1164415\n  TELI0003Z -  ALCOOL ISOPROPILICO 1L - 2 UNI\n  300767 - CX DE MENDA OPT AER / POST 18-36 FBRS 36F/A/P IUNI\n  300303 -  PLAQUETA IDENFICACAO  CABO - OPTICO V.TAL 150\n  TECL0025Z - QUEROSENE 900 ML 2 UNI\n  CODIGO TEMC9ARFZ TUBETE 564 UNIDADES \n  CÓDIGO 300767 CAIXA DE EMENDA 1 UNIDADE","dataHora":"24/10/2025, 16:41:58","data":"24/10/2025","hora":"16:41:58","timestamp":1761334918799},{"id":7,"dc":"191065","descricao":"219332145 COM GASTO","codObraNum":"2025429457","mascaraBa":"BA: 219332145\nOPERADO: JUNIOR\nTEC1: GLAUBER SANTOS 103060484\nTEC2: TIAGO JORDANIO 103060709\nTEC3: FERNANDO MAIA 103056449\nTEC4: GABRIEL MAIA 103060648\nTEC5: HUGO PEREIRA 103060648\nTEC6: MAURO BEZERRA 103056494\nTEC7: LUCAS SAMPAIO 103061793\nATIVIDADE: BACKBINE URBANO\nRAMIFICACAO: OBBU\nCABO: TR#870\nAFETACAO: ROMPIMENTO\nSISTEMA: ANEL-C48\nDESCRICAO DE EQUIPAMENTO: NEC\nTIPO AFETACAO: VANDALISMO\nTIPO DE REDE: DUTO\nTRECHO: ARC X FLO\nCODIGO DO CABO: AS 80G\nMODELO: PIRELLI\nLANCAMENTO DE CABO:(X)Sim ()Nao \nQUANT: 500 MTS \nGASTO DE MATERIAL: (X)SIM ()NAO \nCIREX: XX GAD: XX CIS: 1169832\nAPLICADA EMENDA NOVA: ()Sim (X) Nao \nQNTS: 00\nFUSOES: (X)Sim ()Nao QUANT: 72\nQUANTIDADE DE FIBRAS DO CABO: 72 FO \nQUANTIDADE DE FIBRAS EMENDADAS: 144 FO \nENDERECO DO DANO: RUA SENADOR POMPEU,119 - CENTRO \nPONTO DE REFERENCIA: ESTACAO OI DE BRB\nDISTANCIA DO DANO: 3000 MTS DA EST DE ARC\nCOORDENADAS GPS: 22.900757, -43.188159\nTESTE: CGR\nTEC. TESTE: SUPERVISOR WIILIAN GONCALVES \nTEC.RESP: N/I","materialAplicado":"TR802270 - 30/08/25 09:14\n  Gasto de material \n\n  Cabo de 72 500 MT \n  Cod 3000322245\n\n  1 Caixa de 144 \n  Cod 312724\n\n  Plaqueta 5\n  Cod 300303\n\n  Tubetes 45x2.4mm 144 \n  Cod TEMC9ARFZ","dataHora":"24/10/2025, 16:38:33","data":"24/10/2025","hora":"16:38:33","timestamp":1761334713382},{"id":6,"dc":"199719","descricao":"219254477 COM GASTO","codObraNum":"2025417752","mascaraBa":"BA 219254477\nOP.SUELEN\nTEC1;GLAUBER DOS SANTOS ID.60484\nTEC2;CLODOALDO LINS ID.60762\nTEC3;ALEXANDRO LUIS ID.61767\nTEC4;TIAGO JORDANIO ID.60709\nTEC5;JEFFERSON SILVA ID.56615\nCONTRATUAL;BACKBONE\nATIVIDADE;CORRETIVA   \nRAMIFICACAO;OBBU\nCABO;TR#846\nAFETACAO;ROMPIMENTO\nSISTEMA:51C\nDESCRICAO DO EQUIPAMENTO:ALCATEL\nTIPO AFETACAO;ROMPIMENTO\nTIPO DE REDE;DUTO\nTRECHO; EST ARC X EST IPA\nCAUSA DA FALHA:VANDALISMO\nMODELO;PIRELLI\nLANCAMENTO DE CABO?()SIM /(X)NAO\nQUANT;00\nGASTO DE MATERIAL;(X)SIM/()NAO \nCIREX;XX GAD;XX CIS;1168025\nAPLICADA EMENDA NOVA?()SIM /(X)NAO\nFUSOES?(X)SIM /()NAO QUANT:144\nQUANTIDADE DE FIBRAS DO CABO;14\nQUANTIDADE DE FIBRAS EMENDADAS;144\nENDERECO DO DANO;RUA DA LAPA,35\nBAIRRO:CENTRO\nPONTO DE REFERENCIA:UNIGRANRIO\nDISTANCIA DO DANO;2700MTS\nCOORDENADAS GPS;-22.91473 , -43.17786\nTEC TESTE;VIA GAVA\nTEC,TEC;GLAUBER DOS SANTOS\nTEC RESP;GLAUBER DOS SANTOS","materialAplicado":"TC024073 - 15/08/25 09:58\n  GASTOS  MATERIAL:\n\n  Código da caixa 300763 caixa de 72 fo \n  Código 300763  caixa de 72 fo\n  Tubetes 144 60x3.5 mm Código TEMC5927Z\n  Álcool isopropílico 1 garrafa \n  Caixa de lenço\n\n  CIS:1168025\n","dataHora":"24/10/2025, 16:36:03","data":"24/10/2025","hora":"16:36:03","timestamp":1761334563127},{"id":5,"dc":"198637","descricao":"219384107 COM GASTO","codObraNum":"2025445433","mascaraBa":"BA: 219384107\n\nOPERADOR: JOSIE\n\nTEC: TONY MARCOS 56500\n\nTEC: WILLIAM SILVA 56501\n\nTEC: FABIANO  BARBOSA 56480\n\nTEC: RICARDO GOMES  58183\n\nTEC: RODRIGO DE MENEZES ID: 56909\n\nCONTRATUAL: BACKBONE\n\nATIVIDADE: CORRETIVA \n\nRAMIFICACAO: OBBU\n\nCABO: TR#923\n\nAFETACAO: ROMPIMENTO\n\nSISTEMA: C.15\n\nDESCRICAO DE EQUIPAMENTO: MARCONE\n\nTIPO AFETACAO: ROMPIMENTO\n\nTIPO DE REDE: AEREO\n\nTRECHO: CGD X BGR\n\nCAUSA DA FALHA: DESCARGA ELETRICA\n\nCODIGO DO CABO: AS 80G \n\nMODELO: PIRELLI \n\nLANCAMENTO DE CABO: (X)Sim ( )Nao \n\nQUANT: 800 MTS \n\nGASTO DE MATERIAL: (X)SIM ()NAO \n\nCIREX;XX GAD;XX CIS:1326841\n\nAPLICADA EMENDA NOVA: ()Sim/(X) Nao \n\nQUANT: 00\n\nFUSOES: (X)Sim ()Nao QUANT: 24 FO\n\nQUANTIDADE DE FIBRAS DO CABO: 12 FO \n\nQUANTIDADE DE FIBRAS EMENDADAS: 24 FO \n\nENDERECO DO DANO:  ESTRADA DA MATRIZ 33.503\n\nBAIRRO: GUARATIBA\n\nPONTO DE REFERENCIA:  TERMINAL RODOVIARIO MATO ALTO \n\nDISTANCIA DO DANO: 15.780 CGD \n\nCOORDENADAS GPS:-22.9934944-43.5976402","materialAplicado":"GASTO DE MATERIAL;\n\n\n  CÓD 319013 CABO DE 12 FO UN 800 MTS\n\n  COD. TEMC9ARFZ PROTETOR DE EMEN UN 24 \n\n  CIS 1326841","dataHora":"24/10/2025, 16:28:44","data":"24/10/2025","hora":"16:28:44","timestamp":1761334124161},{"id":4,"dc":"199730","descricao":"219523664 COM GASTO","codObraNum":"2025461323","mascaraBa":"BA; 219523664\n\nOPERADOR;PRISCILLA\n\nTEC 1; GLAUBER MACHADO ID 60484\n\nTEC 2; LUIZ ANTONIO ID 56646  \n\nTEC 3; ALMIR DE JESUS ID 56644\n\nTEC 4; GUSTAVO MENDONCA ID 60935 \n\nCONTRATUAL;BACKBONE \n\nATIVIDADE;CORRETIVA \n\nRAMIFICACAO;OBBU\n\nCABO; TR# 838\n\nAFETACAO; ROMPIMENTO\n\nSISTEMA; E4\n\nDESCRICAO DE EQUIPAMENTO:HUAWEI\n\nTIPO AFETACAO; ROMPIMENTO\n\nTIPO DE REDE; DUTO\n\nTRECHO; FLO X SCR\n\nCAUSA DA FALHA; VANDALISMO\n\nCODIGO DO CABO;AS 80G \n\nMODELO;PIRELLI \n\nLANCAMENTO DE CABO?()Sim /(X )Nao \n\nQUANT;0\n\nGASTO DE MATERIAL;(X)SIM/()NAO \n\nCIREX;XX GAD;XX CIS; 1174385\n\nAPLICADA EMENDA NOVA?()Sim/( X) Nao \n\nQUANT;XX \n\nFUSOES?(X)Sim/(X)Nao QUANT: 144\n\nQUANTIDADE DE FIBRAS DO CABO;  144 FO\n\nQUANTIDADE DE FIBRAS EMENDADAS;144\n\nENDERECO DO DANO; RUA PEDRO ERNESTO, 56\n\nBAIRRO; GAMBOA\n\nPONTO DE REFERENCIA: AO LADO DO CENTRO CULTURAL CEMITERIO DOS PRETOS NOVOS\n\nDISTANCIA DO DANO; 2600 METROS DE FLO\nCOORDENADAS GPS; -22.8962136,-43.1936299","materialAplicado":"GASTO DE MATERIAL\n\n  CIS 1174385\n\n  TR838 FLO X SCR \n\n\n  COD 3000319911 CABO TEL OPT 288F.O - 500M\n\n  COD 300303 PLAQUETA IDENTIFICAÇÃO - 20UN\n\n  TEMC5927Z PROTETOR DE EMENDA - 144UN","dataHora":"24/10/2025, 16:24:27","data":"24/10/2025","hora":"16:24:27","timestamp":1761333867160},{"id":3,"dc":"197809","descricao":"219507153  219555281 COM GASTO","codObraNum":"2025457911","mascaraBa":"219555281\n\nEQUIPE:\n\nTEC 1 LEONARDO MUNIZ ID 56616\n\nTEC 2 JEFFERSON SILVA ID 56615\n\nTEC 3 GLAUBER DOS SANTOS ID 60484\n\nTEC 4 DOUGLAS GUSTAVO 56439\n\nTEC 6 DIEGO FIRMINIO ID 56211\n\nTEC 6 WESLEY WILLIAM ID 56474\n\nRAMIFICACAO:XXX\n\nCABO:TR 1195\n\nAFETACAO: ROMPIMENTO\n\nSISTEMA: RJBU 1967\n\nDESCRICAO DE EQUIPAMENTO: NOKIA\n\nTIPO AFETACAO:ROMPIMENTO\n\nTIPO DE REDE: DUTO \n\nTRECHO: MAR X VVIB \n\nCAUSA DA FALHA: VANDALISMO \n\nMUDANCA DE FACILIDADE:NAO\n\nCODIGO DO CABO:AS 80G\n\nMODELO:PIRELLI\n\nREUTILIZACAO DE CAIXA DE EMENDA:NAO\n\nREMOCAO DE CABO HOUVE:NAO\n\nQUANTIDADE DE FIBRAS DO CABO:72 FO\n\nQUANTIDADE DE FIBRAS EMENDADAS: 144FO\n\nENDERECO DO DANO:  AV TEODORO DA SILVA, 376\n\nBAIRRO:VILA ISABEL \n\nPONTO DE REFERENCIA:PROX AO SHOPING IGUATEMI\n\nDISTANCIA DO DANO: 2770METROS DE MAR\n\nCOORDENADAS GPS: -22.91727, -43.2469183","materialAplicado":"MATERIAL:SIM\n\nCIREX:NAO GAD: NAO CIS 1173989\n\nCOD 312723 CEO AREA 72FBRS - 01UN\n\nCOD 312724 CEO SBTRRN 144FBRS - 01UN\n\nCOD 3000322245 CABO TEL OPT 72FBRS - 300M\n\n\n","dataHora":"24/10/2025, 16:22:04","data":"24/10/2025","hora":"16:22:04","timestamp":1761333724578},{"id":2,"dc":"195760/19561","descricao":"219524213 COM GASTO","codObraNum":"2025448250","mascaraBa":"TR504283 - 08/10/25 10:44\n\n  DESCRICAO DE EQUIPAMENTO:  NOKIA\n\n  TIPO AFETACAO; ROMPIMENTO \n\n  TIPO DE REDE; AEREO\n\n  TRECHO; VSCZ  X ESTACAO BGR \n\n  CAUSA DA FALHA; DESCARGA ELETRICA\n\n  CODIGO DO CABO;AS 80G \n\n  MODELO;PIRELLI \n\n  LANCAMENTO DE CABO?(X)Sim /( )Nao \n\n  QUANT;0\n\n  GASTO DE MATERIAL;(X)SIM/()NAO \n\n  CIREX;XX GAD;XX CIS; 1324006\n\n  APLICADA EMENDA NOVA?(X)Sim/() Nao \n\n  QUANT; 1\n\n  FUSOES?(X)Sim/()Nao QUANT: 72\n\n  QUANTIDADE DE FIBRAS DO CABO; 36\n\n  QUANTIDADE DE FIBRAS EMENDADAS;72\n\n  ENDERECO DO DANO; ESTRADA DE SEPETIBA 285 \n\n  PONTO DE REFERENCIA: AUTO PECAS NOVA CAR \n\n  DISTANCIA DO DANO; DA ESTAÇÃO DE SCZ 5 100 METROS \n\n  COORDENADAS GPS; -22.94936  -43.68100","materialAplicado":"322245 CABO 72 FO 300 M\n\n    300768 CAIXA 36FO 2UN\n\n    TELI0003Z ALCOOL 1LT\n\n    TEMC5333Z ABRACADEIRA 10UN\n\n    300773 CORDAO OPTICO 3UN\n\n    TELI0184Z ESTOPA 1UN\n\n    TEMC4870Z FITA ZEBRADA 1UN\n\n    300303 PLAQUETA 4UN\n\n    TEMC9ARFZ PROTETOR DE EMENDA 144\n\n    TECL0025Z QUEROSENE 1UN\n\n    CIS 1327659","dataHora":"24/10/2025, 16:19:41","data":"24/10/2025","hora":"16:19:41","timestamp":1761333581123}];
    // ====

    let registros = [];
    let contador = 1;
    let registroAtualModal = null;
    let filtroTexto = '';

    function toast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg; t.style.display = 'block';
      setTimeout(() => t.style.display = 'none', 2500);
    }

    function salvarDados() {
      localStorage.setItem('registrosMascara', JSON.stringify(registros));
    }

    // Carrega dados: se não houver no navegador, carrega os dados iniciais
    window.onload = function() {
      const dadosSalvos = localStorage.getItem('registrosMascara');
      if (dadosSalvos) {
        try { registros = JSON.parse(dadosSalvos) || []; } catch { registros = []; }
      } else {
        registros = JSON.parse(JSON.stringify(DADOS_INICIAIS));
        salvarDados();
        toast('17 registros iniciais carregados.');
      }
      contador = registros.length > 0 ? Math.max(...registros.map(r => r.id)) + 1 : 1;
      atualizarTabela();
    };

    function adicionarRegistro() {
      const dc = document.getElementById('dc').value.trim();
      const descricao = document.getElementById('descricao').value.trim();
      const codObraNum = document.getElementById('cod_obra_num').value.trim();
      const mascaraBa = document.getElementById('mascara_ba').value.trim();
      const materialAplicado = document.getElementById('material_aplicado').value.trim();

      if (!dc || !descricao || !codObraNum || !mascaraBa || !materialAplicado) {
        toast('Preencha todos os campos.');
        return;
      }

      const agora = new Date();
      const registro = {
        id: contador++,
        dc, descricao, codObraNum, mascaraBa, materialAplicado,
        dataHora: agora.toLocaleString('pt-BR'),
        data: agora.toLocaleDateString('pt-BR'),
        hora: agora.toLocaleTimeString('pt-BR'),
        timestamp: agora.getTime()
      };

      registros.unshift(registro);
      salvarDados();
      atualizarTabela();
      limparFormulario();
      toast('Registro adicionado.');
    }

    function limparFormulario() {
      document.getElementById('dc').value = '';
      document.getElementById('descricao').value = '';
      document.getElementById('cod_obra_num').value = '';
      document.getElementById('mascara_ba').value = '';
      document.getElementById('material_aplicado').value = '';
      document.getElementById('dc').focus();
      // limpar rascunho do formulário (script de autosave remove a chave)
      try { localStorage.removeItem('mascara.form.draft.v1'); } catch {}
    }

    function atualizarTabela() {
      const tbody = document.getElementById('historicoBody');
      const contadorSpan = document.getElementById('contadorRegistros');

      const listaFiltrada = registros.filter(r => {
        if (!filtroTexto) return true;
        const alvo = `${r.dc} ${r.descricao}`.toLowerCase();
        return alvo.includes(filtroTexto.toLowerCase());
      });

      if (contadorSpan) {
        const total = registros.length;
        const visiveis = listaFiltrada.length;
        contadorSpan.textContent = visiveis === total ? `${total} registros` : `${visiveis}/${total} registros`;
      }

      if (listaFiltrada.length === 0) {
        tbody.innerHTML = `
          <tr class="empty-state">
            <td colspan="5">
              <div>
                <p>📝 Nenhum registro ${filtroTexto ? 'encontrado' : 'adicionado ainda'}</p>
                <p style="font-size: 0.9em; margin-top: 10px;">${filtroTexto ? 'Tente outra busca ou limpe o filtro' : 'Preencha o formulário acima e clique em "Adicionar Registro"'}</p>
              </div>
            </td>
          </tr>
        `;
        return;
      }

      tbody.innerHTML = '';
      listaFiltrada.forEach(registro => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><span class="badge">#${registro.id}</span></td>
          <td>${registro.dc}</td>
          <td>${registro.descricao}</td>
          <td>${registro.codObraNum}</td>
          <td>
            <button class="action-btn view-btn" onclick="abrirModal(${registro.id})">Ver</button>
            <button class="action-btn delete-btn" onclick="deletarRegistro(${registro.id}, event)">Deletar</button>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function aplicarFiltro() {
      const input = document.getElementById('buscaInput');
      filtroTexto = input ? input.value.trim() : '';
      atualizarTabela();
    }

    function abrirModal(id) {
      const registro = registros.find(r => r.id === id);
      if (!registro) return;

      registroAtualModal = id;
      const totalChar = registro.mascaraBa.length + registro.materialAplicado.length;
      const totalPal = (registro.mascaraBa.trim().split(/\s+/).filter(Boolean).length) +
                       (registro.materialAplicado.trim().split(/\s+/).filter(Boolean).length);

      const modalBody = document.getElementById('modalBody');
      modalBody.innerHTML = `
        <div class="stats">
          <div class="stat"><div style="font-weight:800; font-size:1.4em;">#${registro.id}</div><div>ID</div></div>
          <div class="stat"><div style="font-weight:800; font-size:1.4em;">${totalChar}</div><div>Total de caracteres</div></div>
          <div class="stat"><div style="font-weight:800; font-size:1.4em;">${totalPal}</div><div>Total de palavras</div></div>
        </div>

        <p><strong>DC:</strong> ${registro.dc}</p>
        <p><strong>Descrição:</strong> ${registro.descricao}</p>
        <p><strong>COD_OBRA_NUM:</strong> ${registro.codObraNum}</p>
        <p><strong>Data/Hora:</strong> ${registro.dataHora}</p>

        <hr style="border:0; border-top:1px solid #00f5ff33; margin:16px 0" />

        <p><strong>Máscara do BA</strong></p>
        <div style="white-space:pre-wrap; background:#242345; border:1px solid #00f5ff33; padding:12px; border-radius:10px; margin-bottom:12px;">${registro.mascaraBa}</div>

        <p><strong>Material Aplicado</strong></p>
        <div style="white-space:pre-wrap; background:#242345; border:1px solid #00f5ff33; padding:12px; border-radius:10px;">${registro.materialAplicado}</div>
      `;

      document.getElementById('modalDeleteBtn').onclick = deletarRegistroModal;
      document.getElementById('detailModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function fecharModal() {
      document.getElementById('detailModal').style.display = 'none';
      document.body.style.overflow = 'auto';
      registroAtualModal = null;
    }

    window.onclick = function(event) {
      const modal = document.getElementById('detailModal');
      if (event.target == modal) fecharModal();
    }

    function deletarRegistro(id, event) {
      if (event) event.stopPropagation();
      if (confirm('Deseja deletar este registro?')) {
        const index = registros.findIndex(r => r.id === id);
        if (index !== -1) {
          registros.splice(index, 1);
          salvarDados();
          atualizarTabela();
          toast('Registro deletado.');
        }
      }
    }

    function deletarRegistroModal() {
      if (registroAtualModal && confirm('Deseja deletar este registro?')) {
        const index = registros.findIndex(r => r.id === registroAtualModal);
        if (index !== -1) {
          registros.splice(index, 1);
          salvarDados();
          atualizarTabela();
          fecharModal();
          toast('Registro deletado.');
        }
      }
    }

    function limparHistorico() {
      if (confirm('Tem certeza que deseja limpar todo o histórico?')) {
        registros = [];
        contador = 1;
        salvarDados();
        atualizarTabela();
        toast('Histórico limpo.');
      }
    }

    // Exportações
    function exportarJSON() {
      try {
        const blob = new Blob([JSON.stringify(registros, null, 2)], { type: 'application/json;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const nome = `registros_mascara_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'-')}.json`;
        baixarArquivo(url, nome);
      } catch (e) {
        console.error(e); toast('Erro ao exportar JSON.');
      }
    }

    function exportarCSV() {
      if (registros.length === 0) { toast('Não há registros para exportar.'); return; }
      const headers = ['id','dc','descricao','codObraNum','mascaraBa','materialAplicado','data','hora','dataHora','timestamp'];
      const linhas = [headers.join(';')];
      registros.forEach(r => {
        const vals = headers.map(h => {
          const v = (r[h] ?? '').toString().replace(/(\r\n|\n|\r)/g, ' ').replace(/;/g, ',');
          return '"' + v.replace(/"/g, '""') + '"';
        });
        linhas.push(vals.join(';'));
      });
      const csv = linhas.join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const nome = `registros_mascara_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'-')}.csv`;
      baixarArquivo(url, nome);
    }

    function baixarArquivo(url, nome) {
      const a = document.createElement('a');
      a.href = url; a.download = nome;
      document.body.appendChild(a); a.click();
      document.body.removeChild(a); URL.revokeObjectURL(url);
    }

    // Importação
    function importarJSON(event) {
      const file = event.target.files && event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = () => {
        try {
          const data = JSON.parse(reader.result);
          if (!Array.isArray(data)) { toast('Arquivo inválido. Esperado: lista de registros.'); return; }

          registros = data.map((r, i) => ({
            id: Number(r.id) || (i + 1),
            dc: r.dc ?? '',
            descricao: r.descricao ?? '',
            codObraNum: r.codObraNum ?? '',
            mascaraBa: r.mascaraBa ?? '',
            materialAplicado: r.materialAplicado ?? '',
            data: r.data ?? '',
            hora: r.hora ?? '',
            dataHora: r.dataHora ?? '',
            timestamp: Number(r.timestamp) || Date.now()
          })).sort((a,b) => b.id - a.id);

          contador = registros.length > 0 ? Math.max(...registros.map(r => r.id)) + 1 : 1;

          salvarDados();
          aplicarFiltro();
          toast('Dados importados com sucesso.');
        } catch (e) {
          console.error(e); toast('Erro ao importar JSON.');
        }
        event.target.value = '';
      };
      reader.readAsText(file, 'utf-8');
    }

    // ==== Checagem de versão remota (version.json) ====
    const VERSION_CHECK_INTERVAL_MS = 60_000; // 60s
    const VERSION_STORAGE_KEY = 'dashboardMascara_version';

    async function getRemoteVersion() {
      try {
        const res = await fetch('version.json', {
          cache: 'no-store',
          headers: { 'Pragma': 'no-cache', 'Cache-Control': 'no-cache' }
        });
        if (!res.ok) throw new Error('Falha ao obter version.json');
        return await res.json();
      } catch (e) {
        return null;
      }
    }

    function getLocalVersion() {
      try {
        return JSON.parse(localStorage.getItem(VERSION_STORAGE_KEY)) || null;
      } catch {
        return null;
      }
    }

    function setLocalVersion(vobj) {
      localStorage.setItem(VERSION_STORAGE_KEY, JSON.stringify(vobj || {}));
    }

    function showUpdateBanner(remote) {
      const id = 'updateBanner';
      if (document.getElementById(id)) return;

      const banner = document.createElement('div');
      banner.id = id;
      banner.style.position = 'fixed';
      banner.style.left = '50%';
      banner.style.transform = 'translateX(-50%)';
      banner.style.bottom = '20px';
      banner.style.zIndex = '9999';
      banner.style.background = 'linear-gradient(135deg,#00f5ff,#ff00ff)';
      banner.style.color = '#0f0c29';
      banner.style.padding = '12px 16px';
      banner.style.borderRadius = '12px';
      banner.style.boxShadow = '0 6px 24px rgba(0,0,0,0.4)';
      banner.style.display = 'flex';
      banner.style.gap = '10px';
      banner.style.alignItems = 'center';
      banner.style.fontWeight = '800';

      const txt = document.createElement('span');
      txt.textContent = 'Nova versão disponível';
      banner.appendChild(txt);

      if (remote?.version) {
        const chip = document.createElement('span');
        chip.textContent = `v${remote.version}`;
        chip.style.background = '#0f0c29';
        chip.style.color = '#00f5ff';
        chip.style.padding = '4px 8px';
        chip.style.borderRadius = '999px';
        chip.style.fontWeight = '700';
        banner.appendChild(chip);
      }

      const btn = document.createElement('button');
      btn.textContent = 'Atualizar';
      btn.className = 'action-btn view-btn';
      btn.style.marginLeft = '8px';
      btn.onclick = () => {
        // reload normal; autosave garante que campos não se percam
        location.reload();
      };
      banner.appendChild(btn);

      const fechar = document.createElement('button');
      fechar.textContent = 'Dispensar';
      fechar.className = 'action-btn delete-btn';
      fechar.onclick = () => banner.remove();
      banner.appendChild(fechar);

      document.body.appendChild(banner);
    }

    async function checkVersionLoop() {
      const remote = await getRemoteVersion();
      if (!remote?.version) return;

      const local = getLocalVersion();
      if (!local?.version) {
        setLocalVersion({ version: remote.version, ts: Date.now() });
      } else if (local.version !== remote.version) {
        showUpdateBanner(remote);
      }
    }

    window.addEventListener('load', () => {
      setTimeout(checkVersionLoop, 1500);
      setInterval(checkVersionLoop, VERSION_CHECK_INTERVAL_MS);
    });

    // Tecla ESC para fechar modal (F5 não é bloqueado)
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') fecharModal();
    });
  </script>

  <!-- Autosave/Auto-restore do formulário -->
  <script>
    const FORM_STORAGE_KEY = 'mascara.form.draft.v1';
    const formFields = ['#dc','#descricao','#cod_obra_num','#mascara_ba','#material_aplicado'];

    function $el(sel){ return document.querySelector(sel); }

    function restoreFormDraft() {
      try {
        const raw = localStorage.getItem(FORM_STORAGE_KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        formFields.forEach(sel => {
          const el = $el(sel);
          if (el && data && Object.prototype.hasOwnProperty.call(data, sel)) {
            el.value = data[sel] ?? '';
          }
        });
      } catch (e) { console.warn('Falha ao restaurar rascunho:', e); }
    }

    function autosaveFormDraft() {
      const data = {};
      formFields.forEach(sel => {
        const el = $el(sel);
        if (el) data[sel] = el.value;
      });
      try { localStorage.setItem(FORM_STORAGE_KEY, JSON.stringify(data)); }
      catch (e) { console.warn('Falha ao salvar rascunho:', e); }
    }

    function clearFormDraftOnly() {
      formFields.forEach(sel => { const el = $el(sel); if (el) el.value = ''; });
      try { localStorage.removeItem(FORM_STORAGE_KEY); } catch {}
    }

    document.addEventListener('DOMContentLoaded', () => {
      restoreFormDraft();
      formFields.forEach(sel => {
        const el = $el(sel);
        if (!el) return;
        ['input','change','keyup'].forEach(evt => el.addEventListener(evt, autosaveFormDraft));
      });

      // Botão fixo para limpar apenas o formulário (não apaga os registros)
      const toolbar = document.body;
      if (!document.getElementById('btn-clear-form')) {
        const btn = document.createElement('button');
        btn.id = 'btn-clear-form';
        btn.textContent = 'Limpar formulário (não apaga registros)';
        btn.style.cssText = `
          position: fixed; right: 16px; bottom: 16px; z-index: 9999;
          background: #f97316; color: #111; border: 0; padding: 8px 12px;
          border-radius: 8px; font-weight: 600; cursor: pointer; box-shadow: 0 6px 18px rgba(0,0,0,.25);
        `;
        btn.addEventListener('click', () => {
          if (confirm('Limpar apenas o formulário? Seus registros permanecerão salvos.')) {
            clearFormDraftOnly();
          }
        });
        toolbar.appendChild(btn);
      }
    });
  </script>
</body>
</html><script>
  (function() {
    const VERSION_URL = 'version.json';     // Mesmo diretório do index.html
    const CHECK_INTERVAL_MS = 30_000;       // 30s
    const THEME = {
      bg: '#111827',     // cinza-900
      text: '#F9FAFB',   // cinza-50
      accent: '#10B981', // emerald-500
      accentHover: '#059669', // emerald-600
      muted: '#6B7280',  // cinza-500
      border: 'rgba(255,255,255,0.12)'
    };

    let currentVersion = null;
    let dismissedOnce = false;
    let bannerEl = null;

    function createBanner(newVersion) {
      if (bannerEl) return;
      bannerEl = document.createElement('div');
      bannerEl.setAttribute('role', 'status');
      bannerEl.setAttribute('aria-live', 'polite');
      bannerEl.style.position = 'fixed';
      bannerEl.style.left = '50%';
      bannerEl.style.bottom = '16px';
      bannerEl.style.transform = 'translateX(-50%)';
      bannerEl.style.maxWidth = '720px';
      bannerEl.style.width = 'calc(100% - 32px)';
      bannerEl.style.boxSizing = 'border-box';
      bannerEl.style.display = 'flex';
      bannerEl.style.alignItems = 'center';
      bannerEl.style.justifyContent = 'space-between';
      bannerEl.style.gap = '12px';
      bannerEl.style.padding = '12px 16px';
      bannerEl.style.background = THEME.bg;
      bannerEl.style.color = THEME.text;
      bannerEl.style.border = `1px solid ${THEME.border}`;
      bannerEl.style.borderRadius = '10px';
      bannerEl.style.boxShadow = '0 10px 30px rgba(0,0,0,0.35)';
      bannerEl.style.zIndex = '9999';
      bannerEl.style.font = '14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif';

      const msg = document.createElement('div');
      msg.style.flex = '1';
      msg.innerHTML = `
        <strong style="font-weight:600;">Nova versão disponível</strong>
        <span style="color:${THEME.muted}">(${newVersion})</span>.
        Clique em “Atualizar agora” para ver as mudanças.
      `;

      const btns = document.createElement('div');
      btns.style.display = 'flex';
      btns.style.gap = '8px';

      const btnUpdate = document.createElement('button');
      btnUpdate.textContent = 'Atualizar agora';
      btnUpdate.style.background = THEME.accent;
      btnUpdate.style.color = '#fff';
      btnUpdate.style.border = 'none';
      btnUpdate.style.padding = '8px 12px';
      btnUpdate.style.borderRadius = '8px';
      btnUpdate.style.cursor = 'pointer';
      btnUpdate.style.fontWeight = '600';
      btnUpdate.onmouseenter = () => btnUpdate.style.background = THEME.accentHover;
      btnUpdate.onmouseleave = () => btnUpdate.style.background = THEME.accent;
      btnUpdate.onclick = () => {
        // Recarrega ignorando cache
        location.reload(true);
      };

      const btnLater = document.createElement('button');
      btnLater.textContent = 'Depois';
      btnLater.style.background = 'transparent';
      btnLater.style.color = THEME.muted;
      btnLater.style.border = `1px solid ${THEME.border}`;
      btnLater.style.padding = '8px 12px';
      btnLater.style.borderRadius = '8px';
      btnLater.style.cursor = 'pointer';
      btnLater.onmouseenter = () => btnLater.style.color = '#E5E7EB';
      btnLater.onmouseleave = () => btnLater.style.color = THEME.muted;
      btnLater.onclick = () => {
        dismissedOnce = true;
        bannerEl?.remove();
        bannerEl = null;
      };

      btns.appendChild(btnLater);
      btns.appendChild(btnUpdate);
      bannerEl.appendChild(msg);
      bannerEl.appendChild(btns);
      document.body.appendChild(bannerEl);
    }

    async function fetchVersion() {
      try {
        const res = await fetch(`${VERSION_URL}?ts=${Date.now()}`, { cache: 'no-store' });
        if (!res.ok) return null;
        const data = await res.json();
        return data?.version ?? null;
      } catch {
        return null;
      }
    }

    async function init() {
      currentVersion = await fetchVersion();
      // Opcional: exibir versão atual em algum elemento com id="versaoAtual"
      // document.getElementById('versaoAtual')?.textContent = currentVersion ?? '—';

      setInterval(async () => {
        const latest = await fetchVersion();
        if (latest && currentVersion && latest !== currentVersion) {
          if (!dismissedOnce) createBanner(latest);
          // Se preferir atualização automática sem banner, use:
          // location.reload(true);
        }
      }, CHECK_INTERVAL_MS);
    }

    init();
  })();
</script>